@using FocLab.Logic.Models.Users
@{
    ViewBag.Title = "Создание пользователя";

    Layout = ChemistrySettings.LayoutPath;

    var list = ViewBag.Rights as List<MySelectListItem>;

    var modelPrefix = "create.";

    var builder = new GenericUserInterfaceModelBuilder<CreateUserModel>(modelPrefix);

    builder
        .MultipleDropDownListFor(x => x.Rights, list);
}


<div class="row">
    <div class="col-md-12">
        <a href="/Admin/Users" class="btn btn-primary">
            <i class="fa fa-list-ol"></i>
            Список пользователей
        </a>
    </div>
</div>


<div style="height:20px">

</div>

<h2>Создание пользователя</h2>

<div style="height:20px">

</div>

@await Html.RenderGenericUserInterfaceAsync(builder.Result)

<div style="height:40px">

</div>

<div class="m-portlet__foot m-portlet__foot--fit">
    <div class="m-form__actions">
        <button type="reset" class="btn btn-primary action-btn">Создать</button>
        <button onclick="location.href='/Admin/Users/Index'" class="btn btn-secondary">Отмена</button>
    </div>
</div>

@section Scripts{

    <script>
        $(".action-btn").on("click", () => {
            const data = TryForm.GetDataForFormByModelPrefix("@modelPrefix");;

            Requester.SendPostRequestWithAnimation("/Api/User/Create", data, resp => {
                if (resp.IsSucceeded) {
                    setTimeout(() => { location.href = '/Admin/Users/Index' }, 1000)
                }
            });
        });
    </script>
}