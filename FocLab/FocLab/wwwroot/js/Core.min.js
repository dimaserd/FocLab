var Dictionary=function(){function n(n){if(this._keys=[],this._values=[],n)for(var t=0;t<n.length;t++)this[n[t].key]=n[t].value,this._keys.push(n[t].key),this._values.push(n[t].value)}return n.prototype.getByKey=function(n){var t=this._keys.indexOf(n,0);return t>0?this._values[t]:null},n.prototype.add=function(n,t){if(this.containsKey(n))throw new DOMException("Ключ "+n+" уже существует в данном словаре");this[n]=t;this._keys.push(n);this._values.push(t)},n.prototype.remove=function(n){var t=this._keys.indexOf(n,0);this._keys.splice(t,1);this._values.splice(t,1);delete this[n]},n.prototype.keys=function(){return this._keys},n.prototype.values=function(){return this._values},n.prototype.containsKey=function(n){return typeof this[n]=="undefined"?!1:!0},n.prototype.toLookup=function(){return this},n}(),AccountWorker=function(){function n(){}return n.User=null,n.CheckUser=function(){!this.IsAuthenticated()||!0},n.IsAuthenticated=function(){var n=this.User!=null;return console.log("AccountWorker.IsAuthenticated()="+n),n},n}(),AjaxLoader,CSharpType,UserInterfaceType;document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){AccountWorker.CheckUser()},1100)});AjaxLoader=function(){function n(){}return n.InitAjaxLoads=function(){for(var i=document.getElementsByClassName("ajax-load-html"),t=0;t<i.length;t++)n.LoadInnerHtmlToElement(i[t],function(){return 2})},n.LoadInnerHtmlToElement=function(n,t){var r=$(n).data("ajax-link"),i=$(n).data("ajax-method"),f=$(n).data("request-data"),u=$(n).data("on-finish-script");i==null&&(i="GET");$.ajax({type:i,url:r,cache:!1,data:f,success:function(i){$(n).html(i);$(n).removeClass("ajax-load-html");u&&eval(u);t&&t()},error:function(n){alert("Произошла ошибка запроса "+r);console.log(n)}})},n}();AjaxLoader.InitAjaxLoads();var CookieWorker=function(){function n(){}return n.setCookie=function(n,t,i){var u="",r;i&&(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toUTCString());document.cookie=n+"="+(t||"")+u+"; path=/"},n.getCookie=function(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)===" ";)t=t.substring(1,t.length);if(t.indexOf(r)===0)return t.substring(r.length,t.length)}return null},n.eraseCookie=function(n){document.cookie=n+"=; Max-Age=-99999999;"},n}(),EditableComponents=function(){function n(){}return n.InitEditable=function(t,i,r){var u,f;r===void 0&&(r=!1);u=Math.random().toString(36);t.style.display="none";t.setAttribute("data-editable-real-input",u);n.Editables.push({ElementId:u,Value:t.value,OnValueChangedHandler:i});f=n.GetFakeElement(t,u,r);t.before(f);this.InitEditableInner(u);this.InitLiasoningOnChange(t,u)},n.InitLiasoningOnChange=function(n,t){n.addEventListener("change",function(){console.log("Обработчик реального измененного элемента");var n=t,i=document.querySelectorAll('[data-editable-input="'+n+'"]')[0];i.value=this.value});var i=document.querySelectorAll('[data-editable-input="'+t+'"]')[0];i.addEventListener("change",function(n){var i=t,r=document.querySelectorAll('[data-editable-real-input="'+i+'"]')[0];r.value=n.target.value})},n.GetFakeElement=function(t,i,r){var u=document.createElement("div"),f='<div class="form-group editable" data-editable-form="'+i+'">\n        <div class="editable-backdrop" data-editable-backdrop="'+i+'"><\/div>\n        '+n.GetFakeInputElement(t,i,r)+'\n        <div class="editable-buttons">\n            <button class="btn btn-sm btn-editable" data-editable-check="'+i+'"><i class="fas fa-check"><\/i><\/button>\n            <button class="btn btn-sm btn-editable" data-editable-cancel="'+i+'"><i class="fas fa-times"><\/i><\/button>\n        <\/div>\n        <\/div>';return u.innerHTML=f,u},n.GetFakeInputElement=function(n,t,i){return i?'<textarea class="'+n.className+' editable-input" name="'+n.id+'" data-editable-input="'+t+'"\n                    data-editable-input-id="'+t+'">'+n.value+"<\/textarea>":'<input type="text" class="'+n.className+' editable-input" name="'+n.id+'" data-editable-input="'+t+'"\n                    data-editable-input-id="'+t+'" value="'+n.value+'">'},n.InitEditableInner=function(n){var u=this,f=document.querySelectorAll('[data-editable-input="'+n+'"]')[0],t,i,r;f.addEventListener("click",function(n){return u.OnInputClickHandler(n.target)},!1);t=document.querySelectorAll('[data-editable-check="'+n+'"]')[0];t.addEventListener("click",function(){this.OnBtnCheckClickHandler(n)}.bind(this));i=document.querySelectorAll('[data-editable-cancel="'+n+'"]')[0];i.addEventListener("click",function(){this.OnBtnCancelClickHandler(n)}.bind(this));r=document.querySelectorAll('[data-editable-backdrop="'+n+'"]')[0];r.addEventListener("click",function(){this.BackDropClickHandler(n)}.bind(this))},n.CheckValueChanged=function(t){var u=document.querySelectorAll('[data-editable-input="'+t+'"]')[0],i=n.Editables.filter(function(n){return n.ElementId===t})[0],r=u.value;i.Value!==r&&(i.OnValueChangedHandler&&i.OnValueChangedHandler(r),i.Value=r,n.Editables=this.Editables.filter(function(n){return n.ElementId!==t}),n.Editables.push(i))},n.BackDropClickHandler=function(t){var r=document.querySelectorAll('[data-editable-form="'+t+'"]')[0],i;r.classList.remove("editable--active");i=document.querySelectorAll('[data-editable-input="'+t+'"]')[0];i.removeAttribute("editable");n.CheckValueChanged(t)},n.OnInputClickHandler=function(n){var t=n.getAttribute("data-editable-input-id"),r=document.querySelectorAll('[data-editable-input="'+t+'"]')[0],i;r.setAttribute("editable","editable");i=document.querySelectorAll('[data-editable-form="'+t+'"]')[0];i.classList.add("editable--active")},n.OnBtnCheckClickHandler=function(t){var r=document.querySelectorAll('[data-editable-input="'+t+'"]')[0],i;r.removeAttribute("editable");i=document.querySelectorAll('[data-editable-form="'+t+'"]')[0];i.classList.remove("editable--active");n.CheckValueChanged(t)},n.OnBtnCancelClickHandler=function(t){var i=document.querySelectorAll('[data-editable-input="'+t+'"]')[0],r,u;i.removeAttribute("editable");r=document.querySelectorAll('[data-editable-form="'+t+'"]')[0];r.classList.remove("editable--active");u=n.Editables.find(function(n){return n.ElementId===t});i.value=u.Value},n.Editables=[],n}(),FormDataHelper=function(){function n(){}return n.FillData=function(t){n.FillDataByPrefix(t,"")},n.FillDataByPrefix=function(n,t){var r,f,i,e,o,u,s,h;for(r in n)if(f=t+r,i=document.getElementsByName(f)[0],i!==null&&i!==undefined){if(Array.isArray(n[r])){for(i.type!=="select-multiple"&&alert("Попытка присвоить массив элементу ввода который не является select с атрибутом multiple"),e=i,o=function(t){var i=e.options[t],u=n[r].filter(function(n){return i.value===n}).length>0;i.selected=u},u=0;u<e.options.length;u++)o(u);s=new Event("change");i.dispatchEvent(s);continue}i.type==="checkbox"?i.checked=n[r]:i.type==="radio"?document.querySelector("input[name="+f+"][value="+n[r]+"]").checked=!0:i.value=n[r];h=new Event("change");i.dispatchEvent(h)}},n.CollectData=function(t){return n.CollectDataByPrefix(t,"")},n.CollectDataByPrefix=function(n,t){var r,u,i,f;for(r in n)if(n.hasOwnProperty(r)){if(u=t+r,i=document.getElementsByName(u)[0],i==null){alert("Элемент с именем "+u+" не найден на странице проверьте код");continue}if(i.type==="select-multiple"){n[r]=Array.apply(null,i.options).filter(function(n){return n.selected}).map(function(n){return n.value});continue}if(i.type==="radio"){f=document.querySelector('input[name="'+u+'"]:checked')!=null;f&&(n[r]=document.querySelector('input[name="'+u+'"]:checked')).value;continue}n[r]=i.type==="checkbox"?i.checked:i.value}return n},n}(),Logger=function(){function n(){}return n.LogException=function(n,t){$.ajax({type:"POST",data:{ExceptionDate:(new Date).toISOString(),Description:"Ошибка запроса к апи",Message:n,Uri:t!==null?t:location.href},url:"/Api/Log/Exception",async:!0,cache:!1,success:function(n){console.log("Исключение залоггировано",n)},error:function(){alert("Произошла ошибка в логгировании ошибки, срочно обратитесь к разработчикам приложения")}})},n.LogAction=function(n,t,i){var r={LogDate:(new Date).toISOString(),GroupName:i,Uri:window.location.href,Description:t,Message:n};console.log("Logger.LogAction",r);$.ajax({type:"POST",data:r,url:"/Api/Log/Action",async:!0,cache:!1,success:function(n){console.log("Действие залоггировано",n)},error:function(){alert("Произошла ошибка в логгировании ошибки, срочно обратитесь к разработчикам приложения")}})},n}(),ModalWorker=function(){function n(){}return n.ShowModal=function(n){n==""||n==null||n==undefined?n="loadingModal":$("#"+n).modal("show")},n.ChangeModalValues=function(n,t,i){t!=null&&(document.getElementById("header"+n).innerText=t);i!=null&&(document.getElementById("body"+n).innerHTML=i)},n.ShowModalWithValues=function(n,t,i){this.ChangeModalValues(n,t,i);this.ShowModal(n)},n.HideModals=function(){$(".modal").modal("hide");$(".modal-backdrop.fade").remove();$(".modal").on("shown.bs.modal",function(){})},n.HideModal=function(n){$("#"+n).modal("hide")},n}(),AjaxParameters=function(){function n(){}return n}(),Requester=function(){function n(){}return n.SendPostRequestWithAnimation=function(t,i,r,u){ModalWorker.ShowModal("loadingModal");n.SendAjaxPost(t,i,r,u,!0)},n.UploadFilesToServer=function(t,i,r){var u="/Api/FilesDirectory/UploadFiles",f,o,e;if(!n.IsRequestGoing(u)){if(f=$("#"+t).prop("files"),o=new FormData,f.length===0){ToastrWorker.HandleBaseApiResponse(new BaseApiResponse(!1,"Файлы не выбраны"));return}for(e=0;e<f.length;e++)o.append("Files",f[e]);$.ajax({url:u,type:"POST",data:o,async:!0,cache:!1,dataType:"json",contentType:!1,processData:!1,success:function(t){n.DeleteCompletedRequest(u);i&&i(t)},error:function(t,i,f){Logger.LogException(i,u);n.DeleteCompletedRequest(u);ModalWorker.HideModals();var e=new BaseApiResponse(!1,"Произошла ошибка! Мы уже знаем о ней, скоро с ней разберемся!");ToastrWorker.HandleBaseApiResponse(e);r&&r(t,i,f)}})}},n.SendAjaxGet=function(t,i,r,u){if(!n.IsRequestGoing(t)){var f={type:"GET",data:i,url:t,async:!0,cache:!1,success:function(i){n.DeleteCompletedRequest(t);r&&r(i)},error:function(i,r,f){Logger.LogException(r,t);n.DeleteCompletedRequest(t);u&&u(i,r,f)}};$.ajax(f)}},n.SendAjaxPost=function(t,i,r,u,f){var e,o;if(!n.IsRequestGoing(t)){if(i==null){alert("Вы подали пустой объект в запрос");return}e={};e.type="POST";e.data=i;e.url=t;e.async=!0;e.cache=!1;e.success=function(i){n.DeleteCompletedRequest(t);f&&n.OnSuccessAnimationHandler(i);r&&r(i)};e.error=function(i,r,e){Logger.LogException(r,t);n.DeleteCompletedRequest(t);f&&n.OnErrorAnimationHandler();u&&u(i,r,e)};o=i.constructor===Array;o&&(e.contentType="application/json; charset=utf-8",e.dataType="json",e.data=JSON.stringify(i));n.GoingRequests.push(t);$.ajax(e)}},n.GoingRequests=[],n.DeleteCompletedRequest=function(t){n.GoingRequests=n.GoingRequests.filter(function(n){return n!==t})},n.ParseDate=function(n){n=n.replace(new RegExp("/","g"),".");var t=n.split("."),i=new Date(+t[2],+t[1]-1,+t[0]);return i.toISOString()},n.GetCombinedData=function(t,i){var u={},r,f,e;for(r in i)if(Array.isArray(i[r]))u[t+r]=i[r];else if(typeof i[r]=="object"){f=n.GetCombinedData(""+t+r+".",i[r]);for(e in f)u[e]=f[e]}else u[t+r]=i[r];return u},n.GetParams=function(t){return t=n.GetCombinedData("",t),$.param(t,!0)},n.IsRequestGoing=function(t){var i=n.GoingRequests.filter(function(n){return n===t});return i.length>0},n.OnSuccessAnimationHandler=function(n){ModalWorker.HideModals();ToastrWorker.HandleBaseApiResponse(n)},n.OnErrorAnimationHandler=function(){ModalWorker.HideModals();var n=new BaseApiResponse(!1,"Произошла ошибка! Мы уже знаем о ней, и скоро с ней разберемся!");ToastrWorker.HandleBaseApiResponse(n)},n}(),GenericBaseApiResponse=function(){function n(n,t,i){this.IsSucceeded=n;this.Message=t;this.ResponseObject=i}return n}(),BaseApiResponse=function(){function n(n,t){this.IsSucceeded=n;this.Message=t}return n}(),ToastrWorker=function(){function n(){}return n.ShowError=function(t){var i={IsSucceeded:!1,Message:t};n.HandleBaseApiResponse(i)},n.ShowSuccess=function(t){var i={IsSucceeded:!0,Message:t};n.HandleBaseApiResponse(i)},n.HandleBaseApiResponse=function(n){if(console.log("HandleBaseApiResponse",n),n.IsSucceeded===undefined){alert("Произошла ошибка. Объект не является типом BaseApiResponse");return}if(n.Message===undefined){alert("Произошла ошибка. Объект не является типом BaseApiResponse");return}toastr.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"};n.IsSucceeded?toastr.success(n.Message):toastr.error(n.Message)},n}(),Utils=function(){function n(){}return n.GetDateFromDateRangePicker=function(n){var f=document.getElementById(n),t,r,u,i;if(f===null)return alert("Элемент с идентификатором "+n+" не найден на странице проверьте код"),null;if(t=f.value.replace(/ /g,""),t=t.split("-"),t!==""){for(r in t)u=t[r].split("/"),u.reverse(),t[r]=u.join("-");return i={},t[0]!==""&&(i={Min:t[0]}),t[1]!=undefined&&(i.Max=t[1]),console.log(i,t[0],t[1]),i}return null},n.GetDateFromDatePicker=function(n){var r=document.getElementById(n),t,i;return r===[]?(alert("Элемент с идентификатором "+n+" не найден на странице проверьте код"),null):(t=r.value.replace(/ /g,""),t!==""?(console.log("Not ''"),i=t.split("/"),i.reverse(),i.join("-")):null)},n.FillSelect=function(n,t,i,r){for(var f,u=0;u<t.length;u++)f=document.createElement("option"),f.innerHTML=i(t[u]),f.value=r(t[u]),n.append(f)},n.GetImageLinkByFileId=function(n,t){return"/FileCopies/Images/"+t.toString()+"/"+n+".jpg"},n.SetDatePicker=function(n,t){t===void 0&&(t=null);$.fn.datepicker.dates.ru={days:["понедельник","воскресенье","вторник","среда","четверг","пятница","суббота"],daysShort:["вс","пн","вт","ср","чт","пт","сб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Today"};$(n).datepicker({format:"dd/mm/yyyy",autoclose:!0,language:"ru",startDate:t})},n.SetDateRangePicker=function(n){$(n).daterangepicker({autoUpdateInput:!1,locale:{cancelLabel:"Очистить",applyLabel:"Применить",daysOfWeek:["Пн","Вт","Ср","Чт","Пт","Сб","Вс"],monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],firstDay:0}});$(n).on("apply.daterangepicker",function(n,t){$(this).val(t.startDate.format("DD/MM/YYYY")+" - "+t.endDate.format("DD/MM/YYYY"))});$(n).on("cancel.daterangepicker",function(){$(this).val("")})},n}(),ImageSizeType;(function(n){n[n.Icon="Icon"]="Icon";n[n.Medium="Medium"]="Medium";n[n.Small="Small"]="Small";n[n.Original="Original"]="Original"})(ImageSizeType||(ImageSizeType={})),function(n){n[n.String="String"]="String";n[n.Int="Int32"]="Int";n[n.Decimal="Decimal"]="Decimal";n[n.Boolean="Boolean"]="Boolean";n[n.DateTime="DateTime"]="DateTime"}(CSharpType||(CSharpType={})),function(n){n[n.TextBox="TextBox"]="TextBox";n[n.TextArea="TextArea"]="TextArea";n[n.DropDownList="DropDownList"]="DropDownList";n[n.Hidden="Hidden"]="Hidden";n[n.DatePicker="DatePicker"]="DatePicker";n[n.MultipleDropDownList="MultipleDropDownList"]="MultipleDropDownList"}(UserInterfaceType||(UserInterfaceType={}));var FormDrawImplementation=function(){function n(n){this._datePickerPropNames=[];this._selectClass="form-draw-select";this._model=n}return n.prototype.BeforeFormDrawing=function(){},n.prototype.AfterFormDrawing=function(){var t,i,r;for($("."+this._selectClass).selectpicker("refresh"),t=0;t<this._datePickerPropNames.length;t++)i=this._datePickerPropNames[t],r=""+this._model.Prefix+i,n.InitCalendarForPrefixedProperty(r)},n.InitCalendarForPrefixedProperty=function(n){Utils.SetDatePicker("input[name='"+n+"']")},n.prototype.GetPropertyValueName=function(n){return""+this._model.Prefix+n.PropertyName},n.prototype.RenderDatePicker=function(n){return this._datePickerPropNames.push(n.PropertyName),this.RenderTextBox(n)},n.prototype.RenderHidden=function(n){var t=ValueProviderHelper.GetStringValueFromValueProvider(n,this._model.ValueProvider);return'<input type="hidden" name="'+this.GetPropertyValueName(n)+'" value="'+t+'">'},n.prototype.RenderTextBox=function(n){var t=ValueProviderHelper.GetStringValueFromValueProvider(n,this._model.ValueProvider);return'<div class="form-group m-form__group">\n                <label for="'+n.PropertyName+'">'+n.PropertyDisplayName+'<\/label>\n                <input autocomplete="false" class="form-control m-input" name="'+this.GetPropertyValueName(n)+'" type="text" value="'+t+'">\n            <\/div>'},n.prototype.RenderTextArea=function(n){var t=ValueProviderHelper.GetStringValueFromValueProvider(n,this._model.ValueProvider);return'<div class="form-group m-form__group">\n                <label for="'+n.PropertyName+'">'+n.PropertyDisplayName+'<\/label>\n                <textarea autocomplete="false" class="form-control m-input" name="'+this.GetPropertyValueName(n)+'" rows="3" style="margin-top: 0px; margin-bottom: 0px; height: 79px;">'+t+"<\/textarea>\n            <\/div>"},n.prototype.RenderGenericDropList=function(n,t,i){var r=ValueProviderHelper.GetRawValueFromValueProvider(n,this._model.ValueProvider);t=HtmlDrawHelper.ProceesSelectValues(n,r,t);var u=this._selectClass+" form-control m-input m-bootstrap-select m_selectpicker",f=i?new Dictionary([{key:"multiple",value:""}]):null,e=HtmlDrawHelper.RenderSelect(u,this.GetPropertyValueName(n),t,f);return'<div class="form-group m-form__group">\n                <label for="'+n.PropertyName+'">'+n.PropertyDisplayName+"<\/label>\n                "+e+"   \n            <\/div>"},n.prototype.RenderDropDownList=function(n,t){return this.RenderGenericDropList(n,t,!1)},n.prototype.RenderMultipleDropDownList=function(n,t){return this.RenderGenericDropList(n,t,!0)},n}(),TabFormDrawImplementation=function(){function n(n){this._datePickerPropNames=[];this._selectClass="form-draw-select";this._model=n}return n.prototype.BeforeFormDrawing=function(){},n.prototype.AfterFormDrawing=function(){var n,t,i;for($("."+this._selectClass).selectpicker("refresh"),n=0;n<this._datePickerPropNames.length;n++)t=this._datePickerPropNames[n],i=""+this._model.Prefix+t,FormDrawImplementation.InitCalendarForPrefixedProperty(i)},n.prototype.RenderTextBox=function(n){var t=ValueProviderHelper.GetStringValueFromValueProvider(n,this._model.ValueProvider);return'<div class="form-group m-form__group row">\n                    <label class="col-xl-3 col-lg-3 col-form-label">\n                        '+n.PropertyDisplayName+':\n                    <\/label>\n                    <div class="col-xl-9 col-lg-9">\n                        <div class="input-group">\n                            <input type="text" name="'+this.GetPropertyValueName(n.PropertyName)+'" class="form-control m-input" placeholder="" value="'+t+'">\n                        <\/div>\n                    <\/div>\n                <\/div>'},n.prototype.RenderTextArea=function(n){var t=ValueProviderHelper.GetStringValueFromValueProvider(n,this._model.ValueProvider);return'<div class="form-group m-form__group row">\n                    <label class="col-xl-3 col-lg-3 col-form-label">'+n.PropertyDisplayName+'<\/label>\n                    <div class="col-xl-9 col-lg-9">\n                        <textarea class="form-control m-input" name="'+this.GetPropertyValueName(n.PropertyName)+'" rows="3">'+t+"<\/textarea>\n                    <\/div>\n\n                <\/div>"},n.prototype.RenderGenericDropList=function(n,t,i){var r=ValueProviderHelper.GetRawValueFromValueProvider(n,this._model.ValueProvider);t=HtmlDrawHelper.ProceesSelectValues(n,r,t);var u=this._selectClass+" form-control m-input m-bootstrap-select m_selectpicker",f=i?new Dictionary([{key:"multiple",value:""}]):null,e=HtmlDrawHelper.RenderSelect(u,this.GetPropertyValueName(n.PropertyName),t,f);return'<div class="form-group m-form__group row">\n                    <label class="col-xl-3 col-lg-3 col-form-label">'+n.PropertyDisplayName+':<\/label>\n                    <div class="col-xl-9 col-lg-9">\n                        '+e+"\n                    <\/div>\n                <\/div>"},n.prototype.RenderDropDownList=function(n,t){return this.RenderGenericDropList(n,t,!1)},n.prototype.RenderMultipleDropDownList=function(n,t){return this.RenderGenericDropList(n,t,!0)},n.prototype.RenderHidden=function(n){var t=ValueProviderHelper.GetStringValueFromValueProvider(n,this._model.ValueProvider);return'<input type="hidden" name="'+this.GetPropertyValueName(n.PropertyName)+'" value="'+t+'">'},n.prototype.RenderDatePicker=function(n){return this._datePickerPropNames.push(n.PropertyName),this.RenderTextBox(n)},n.prototype.GetPropertyValueName=function(n){return""+this._model.Prefix+n},n}(),FormDrawFactory=function(){function n(){}return n.GetImplementation=function(t,i){var r=n.DictionaryImplementations.getByKey(i);return r==null?new FormDrawImplementation(t):r(t)},n.DictionaryImplementations=new Dictionary([{key:"Default",value:function(n){return new FormDrawImplementation(n)}},{key:"Tab",value:function(n){return new TabFormDrawImplementation(n)}}]),n}(),HtmlDrawHelper=function(){function n(){}return n.RenderAttributesString=function(n){var u="",t,i,r;if(n==null)return u;for(t=0;t<n._keys.length;t++)i=n._keys[t],r=n.getByKey(i),u+=r==null||r===""?" "+i:" "+i+'="'+r+'"';return u},n.RenderSelect=function(t,i,r,u){var s=n.RenderAttributesString(u),o,f,e,h;for(console.log("RenderSelect",s),o="<select"+s+' class="'+t+'" name="'+i+'">',f=0;f<r.length;f++)e=r[f],h=e.Selected?' selected="selected"':"",o+="<option"+h+' value="'+e.Value+'">'+e.Text+"<\/option>";return o+"<\/select>"},n.ProceesSelectValues=function(n,t,i){if(t!=null){i.forEach(function(n){return n.Selected=!1});var r=n.TypeName==CSharpType.Boolean.toString()?i.find(function(n){return n.Value.toLowerCase()==t.toLowerCase()}):i.find(function(n){return n.Value==t});r!=null&&(r.Selected=!0)}return i},n}(),ValueProviderHelper=function(){function n(){}return n.GetStringValueFromValueProvider=function(t,i){var r=n.GetRawValueFromValueProvider(t,i);return r==null?"":r},n.GetRawValueFromValueProvider=function(n,t){if(t==null)return null;if(!n.IsEnumerable){var i=t.Singles.find(function(t){return t.PropertyName==n.PropertyName});return i==null?null:i.Value}return""},n}(),FormTypeDataGetter=function(){function n(n){if(!n.IsClass){var t="Тип не являющийся классом не поддерживается";alert(t);throw Error(t);}this._typeDescription=n}return n.prototype.BuildObject=function(){for(var i,t={},n=0;n<this._typeDescription.Properties.length;n++)i=this._typeDescription.Properties[n],t[i.PropertyName]="";return t},n.prototype.GetData=function(n){for(var t,i=FormDataHelper.CollectDataByPrefix(this.BuildObject(),n),r=0;r<this._typeDescription.Properties.length;r++){t=this._typeDescription.Properties[r];switch(t.TypeName){case CSharpType.Decimal.toString():i[t.PropertyName]=Number(i[t.PropertyName].replace(/,/g,"."));break;case CSharpType.Boolean.toString():i[t.PropertyName]=i[t.PropertyName].toLowerCase()=="true"}}return i},n}(),FormTypeDrawer=function(){function n(n,t){this._formDrawer=n;this._typeDescription=t}return n.prototype.BeforeFormDrawing=function(){this._formDrawer.BeforeFormDrawing()},n.prototype.AfterFormDrawing=function(){this._formDrawer.AfterFormDrawing()},n.prototype.TextBoxFor=function(t){var i=n.FindPropByName(this._typeDescription,t);return this._formDrawer.RenderTextBox(i)},n.prototype.DatePickerFor=function(t){var i=n.FindPropByName(this._typeDescription,t);return this._formDrawer.RenderDatePicker(i)},n.prototype.TextAreaFor=function(t){var i=n.FindPropByName(this._typeDescription,t);return this._formDrawer.RenderTextArea(i)},n.prototype.DropDownFor=function(t,i){var r=n.FindPropByName(this._typeDescription,t);return this._formDrawer.RenderDropDownList(r,i)},n.prototype.MultipleDropDownFor=function(t,i){var r=n.FindPropByName(this._typeDescription,t);return this._formDrawer.RenderMultipleDropDownList(r,i)},n.prototype.HiddenFor=function(t){var i=n.FindPropByName(this._typeDescription,t);return this._formDrawer.RenderHidden(i)},n.FindPropByName=function(n,t){for(var r,i=0;i<n.Properties.length;i++)if(r=n.Properties[i],r.PropertyName==t)return r;throw new Error("Свойство "+t+" не найдено");},n}(),TryForm=function(){function n(){}return n.UnWrapModel=function(n,t){for(var i,r="",u=0;u<n.Blocks.length;u++){i=n.Blocks[u];switch(i.InterfaceType){case UserInterfaceType.TextBox:r+=t.TextBoxFor(i.PropertyName);break;case UserInterfaceType.TextArea:r+=t.TextAreaFor(i.PropertyName);break;case UserInterfaceType.DropDownList:r+=t.DropDownFor(i.PropertyName,i.SelectList);break;case UserInterfaceType.Hidden:r+=t.HiddenFor(i.PropertyName);break;case UserInterfaceType.DatePicker:r+=t.DatePickerFor(i.PropertyName);break;case UserInterfaceType.MultipleDropDownList:r+=t.MultipleDropDownFor(i.PropertyName,i.SelectList);break;default:console.log("Данный блок не реализован",i);throw new Error("Не реализовано");}}return r},n.ThrowError=function(n){alert(n);throw Error(n);},n.GetForms=function(){for(var r,i=document.getElementsByClassName("generic-user-interface"),t=0;t<i.length;t++)r=i[t],n.GetForm(r)},n.GetDataForFormByModelPrefix=function(t){var i=n._genericInterfaces.find(function(n){return n.Prefix==t});return i==null,n.GetDataForForm(i)},n.GetDataForFirstForm=function(){n._genericInterfaces.length==0&&n.ThrowError("На странице не объявлено ни одной формы");var t=n._genericInterfaces[0];return n.GetDataForForm(t)},n.GetDataForForm=function(n){var t=new FormTypeDataGetter(n.TypeDescription);return t.GetData(n.Prefix)},n.AddBuildModel=function(t){var i=n._genericInterfaces.find(function(n){return n.Prefix==t.Prefix});i!=null&&n.ThrowError("На странице уже объявлена форма с префиксом "+t.Prefix);n._genericInterfaces.push(t)},n.GetForm=function(t){var f=t.getAttribute("data-id"),e=t.getAttribute("data-form-draw"),i=window[f],u,r;n.AddBuildModel(i);u=FormDrawFactory.GetImplementation(i,e);r=new FormTypeDrawer(u,i.TypeDescription);r.BeforeFormDrawing();t.innerHTML=n.UnWrapModel(i,r);r.AfterFormDrawing()},n._genericInterfaces=[],n}();TryForm.GetForms();