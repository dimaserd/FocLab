var AccountWorker=function(){function n(){}return n.CheckUser=function(){!this.IsAuthenticated()||!0},n.IsAuthenticated=function(){var n=this.User!=null;return console.log("AccountWorker.IsAuthenticated()="+n),n},n.User=null,n}(),DatePickerUtils,ImageSizeType,NotificationWorker,UserNotificationType,TimePickerUtils,Utils;document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){AccountWorker.CheckUser()},1100)});DatePickerUtils=function(){function n(){}return n.InitDictionary=function(){$.fn.datepicker.dates.ru={days:["понедельник","воскресенье","вторник","среда","четверг","пятница","суббота"],daysShort:["вс","пн","вт","ср","чт","пт","сб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Today"}},n.SetDatePicker=function(t,i,r){var f,e,u,o,s;r===void 0&&(r=null);f=document.getElementById(t);f==null&&alert("Utils.SetDatePicker Элемент с идентификатором "+t+" не найден на странице");e=document.getElementById(i);e==null&&alert("Utils.SetDatePicker Элемент с идентификатором "+i+" не найден на странице");u="#"+t;$(u).datepicker({format:"dd/mm/yyyy",autoclose:!0,language:"ru",zIndexOffset:1e3});n.ActiveDatePickers.push({BackElementId:i,DatePickerId:t});$(u).on("change",function(t){var f=t.target.value,r=new Date(n.DDMMYYYYToMMDDDDYYYYString(f)),u;isNaN(r.getTime())&&(r=null);u=r==null?CrocoAppCore.Application.FormDataHelper.NullValue:new Date(r.getTime()-r.getTimezoneOffset()*6e4).toISOString().split("T")[0];console.log("Utils.DatePickerValueChanged",r,u);document.getElementById(i).value=u});o=new Event("change");s=document.getElementById(t);s.dispatchEvent(o);r!==undefined&&n.SetDateToDatePicker(t,r)},n.SetDateToDatePicker=function(n,t){var i="#"+n;$(i).datepicker("setDate",t)},n.DDMMYYYYToMMDDDDYYYYString=function(n){var t=n.split("/");return t[1]+"/"+t[0]+"/"+t[2]},n.GetDateFromDatePicker=function(t){var i=n.ActiveDatePickers.find(function(n){return n.DatePickerId===t});return i==null&&alert("DatePicker с идентификатором "+t+" не инициалиирован на странице"),new Date(document.getElementById(i.BackElementId).value)},n.ActiveDatePickers=[],n}();DatePickerUtils.InitDictionary(),function(n){n[n.Icon="Icon"]="Icon";n[n.Medium="Medium"]="Medium";n[n.Small="Small"]="Small";n[n.Original="Original"]="Original"}(ImageSizeType||(ImageSizeType={}));CrocoAppCore.InitFields();CrocoAppCore.GenericInterfaceHelper.FormHelper.DrawForms();setTimeout(function(){NotificationWorker.GetNotification()},1e3);NotificationWorker=function(){function n(){}return n.GetNotification=function(){CrocoAppCore.Application.Requester.Post("/Api/Notification/Client/GetLast",{},function(n){(console.log("GetNotification",n),n!==null&&n!==undefined)&&(CrocoAppCore.ToastrWorker.ShowSuccess(n.Text),setTimeout(function(){console.log("Marking notification");CrocoAppCore.Application.Requester.Post("/Api/Notification/Client/Read",{Id:n.Id},function(){},null)},1e3))},null)},n}(),function(n){n[n.Success="Success"]="Success";n[n.Info="Info"]="Info";n[n.Warning="Warning"]="Warning";n[n.Danger="Danger"]="Danger";n[n.Custom="Custom"]="Custom"}(UserNotificationType||(UserNotificationType={}));TimePickerUtils=function(){function n(){}return n.SetTimePicker=function(n){$("#"+n).timepicker()},n.GetTimeValueInMinutes=function(n){var i=document.getElementById(n),t;if(i==null){alert("Элемент с идентификатором '"+n+"' не найден на странице");return}if(t=i.value,t=="12:00 AM")return 0;var r=t.split(" "),u=r[0].split(":").map(function(n){return Number(n)}),f=u[0]*60+u[1];return r[1]=="PM"?f+720:f},n}();Utils=function(){function n(){}return n.FillSelect=function(n,t,i,r){for(var f,u=0;u<t.length;u++)f=document.createElement("option"),f.innerHTML=i(t[u]),f.value=r(t[u]),n.append(f)},n.GetImageLinkByFileId=function(n,t){return"/FileCopies/Images/"+t.toString()+"/"+n+".jpg"},n}();