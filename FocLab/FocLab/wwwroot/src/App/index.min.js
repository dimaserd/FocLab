var AccountWorker=function(){function n(){}return n.CheckUser=function(){!this.IsAuthenticated()||!0},n.IsAuthenticated=function(){var n=this.User!=null;return console.log("AccountWorker.IsAuthenticated()="+n),n},n.User=null,n}(),DatePickerUtils,GenericInterfaceAppHelper,ImageSizeType;document.addEventListener("DOMContentLoaded",function(){setTimeout(function(){AccountWorker.CheckUser()},1100)});DatePickerUtils=function(){function n(){}return n.InitDictionary=function(){$.fn.datepicker.dates.ru={days:["понедельник","воскресенье","вторник","среда","четверг","пятница","суббота"],daysShort:["вс","пн","вт","ср","чт","пт","сб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Today"}},n.SetDatePicker=function(t,i,r){var f,e,u,o,s;r===void 0&&(r=null);f=document.getElementById(t);f==null&&alert("Utils.SetDatePicker Элемент с идентификатором "+t+" не найден на странице");e=document.getElementById(i);e==null&&alert("Utils.SetDatePicker Элемент с идентификатором "+i+" не найден на странице");u="#"+t;$(u).datepicker({format:"dd/mm/yyyy",autoclose:!0,language:"ru",zIndexOffset:1e3});n.ActiveDatePickers.push({BackElementId:i,DatePickerId:t});$(u).on("change",function(t){var f=t.target.value,r=new Date(n.DDMMYYYYToMMDDDDYYYYString(f)),u;isNaN(r.getTime())&&(r=null);u=r==null?CrocoAppCore.Application.FormDataHelper.NullValue:new Date(r.getTime()-r.getTimezoneOffset()*6e4).toISOString().split("T")[0];console.log("Utils.DatePickerValueChanged",r,u);document.getElementById(i).value=u});o=new Event("change");s=document.getElementById(t);s.dispatchEvent(o);r!==undefined&&n.SetDateToDatePicker(t,r)},n.SetDateToDatePicker=function(n,t){var i="#"+n;$(i).datepicker("setDate",t)},n.DDMMYYYYToMMDDDDYYYYString=function(n){var t=n.split("/");return t[1]+"/"+t[0]+"/"+t[2]},n.GetDateFromDatePicker=function(t){var i=n.ActiveDatePickers.find(function(n){return n.DatePickerId===t});return i==null&&alert("DatePicker с идентификатором "+t+" не инициалиирован на странице"),new Date(document.getElementById(i.BackElementId).value)},n.ActiveDatePickers=[],n}();DatePickerUtils.InitDictionary();GenericInterfaceAppHelper=function(){function n(){this.FormHelper=new GenericForm({FormDrawFactory:CrocoAppCore.GetFormDrawFactory()})}return n.prototype.GetUserInterfaceModel=function(n,t,i){var r={typeName:n,modelPrefix:t};CrocoAppCore.Application.Requester.Post("/Api/Documentation/GenericInterface",r,function(t){if(t==null){alert("Обобщенный интерфейс с названием '"+n+"' не пришёл с сервера");return}i(t)},function(){var t="Произошла ошибка при поиске обобщенного интерфейса по типу "+n;alert(t);CrocoAppCore.Application.Logger.LogAction(t,"","GenericInterfaceAppHelper.GetUserInterfaceModel.ErrorOnRequest",JSON.stringify(r))})},n.prototype.GetEnumModel=function(n,t){var i={typeName:n};CrocoAppCore.Application.Requester.Post("/Api/Documentation/EnumType",i,function(i){if(i==null){alert("Перечисление с названием '"+n+"' не пришло с сервера");return}t(i)},function(){var t="Произошла ошибка при поиске перечеисления с названием "+n;alert(t);CrocoAppCore.Application.Logger.LogAction(t,"","GenericInterfaceAppHelper.GetEnumModel.ErrorOnRequest",JSON.stringify(i))})},n}(),function(n){n[n.Icon="Icon"]="Icon";n[n.Medium="Medium"]="Medium";n[n.Small="Small"]="Small";n[n.Original="Original"]="Original"}(ImageSizeType||(ImageSizeType={}));CrocoAppCore.InitFields();CrocoAppCore.GenericInterfaceHelper.FormHelper.DrawForms();setTimeout(function(){NotificationWorker.GetNotification()},1e3);var TimePickerUtils=function(){function n(){}return n.SetTimePicker=function(n){$("#"+n).timepicker()},n.GetTimeValueInMinutes=function(n){var i=document.getElementById(n),t;if(i==null){alert("Элемент с идентификатором '"+n+"' не найден на странице");return}if(t=i.value,t=="12:00 AM")return 0;var r=t.split(" "),u=r[0].split(":").map(function(n){return Number(n)}),f=u[0]*60+u[1];return r[1]=="PM"?f+720:f},n}(),Utils=function(){function n(){}return n.FillSelect=function(n,t,i,r){for(var f,u=0;u<t.length;u++)f=document.createElement("option"),f.innerHTML=i(t[u]),f.value=r(t[u]),n.append(f)},n.GetImageLinkByFileId=function(n,t){return"/FileCopies/Images/"+t.toString()+"/"+n+".jpg"},n}(),GetListResultExtensions=function(){function n(){}return n.GetCurrentPageNumber=function(n){return n.Count===null?0:Math.trunc(n.OffSet/n.Count)},n.GetPagesCount=function(n){if(n.Count===null)return 0;var t=Math.trunc(n.TotalCount/n.Count);return n.TotalCount%n.Count>0?t+1:t},n}(),PagerModel=function(){function n(){}return n.ToPagerModel=function(t,i){var o=CrocoAppCore.Application.FormDataUtils.GetStartUrlNoParams(i),r=CrocoAppCore.Application.FormDataUtils.GetUrlParamsObject(i),u="CountToChange",f="OffSetToChange",e;return r.Count=u,r.OffSet=f,e=o+"?"+n.GetParams(r),{CurrentPage:GetListResultExtensions.GetCurrentPageNumber(t),PagesCount:GetListResultExtensions.GetPagesCount(t),LinkFormat:e.replace(u,"{0}").replace(f,"{1}"),PageSize:t.Count}},n.GetCombinedData=function(n,t){var r={},i,u,f;for(i in t)if(Array.isArray(t[i]))r[n+i]=t[i];else if(typeof t[i]=="object"){u=this.GetCombinedData(""+n+i+".",t[i]);for(f in u)r[f]=u[f]}else r[n+i]=t[i];return r},n.GetParams=function(t){return t=n.GetCombinedData("",t),$.param(t,!0)},n}(),Pagination=function(){function n(){}return n.RenderPaginationToElementIds=function(n,t){for(var r,u,f=this.RenderPagination(n),i=0;i<t.length;i++)r=t[i],u=document.getElementById(r),u==null&&alert("Элемент не найден по указаному идентификатору '"+r+"'"),u.innerHTML=f},n.RenderPagination=function(n){var i,t,r,u;if(n.PagesCount===1)return"";for(i='<div class="table-responsive">\n        <nav aria-label="Page navigation example">\n            <ul class="pagination">',t=0;t<n.PagesCount;t++)r=t==n.CurrentPage?"active":"",u=n.LinkFormat.format(n.PageSize.toString(),(t*n.PageSize).toString()),i+='<li class="page-item '+r+'">\n                        <a class="page-link" href="'+u+'">'+(t+1)+"<\/a>\n                    <\/li>";return i+"<\/ul>\n                <\/nav>\n                <\/div>"},n}();