var TaskFilterMethods=function(){function n(){}return n.ApplyTextFilter=function(n,t){t=t.toLowerCase();return n.filter(function(n){return n.Title!=null&&n.Title.toLowerCase().includes(t)})},n.ApplyStatusFilter=function(n,t){if(t==null)return n;return n.filter(function(n){return n.IsPerformed==t})},n.ParseBoolean=function(n){return n===""||n===null?null:n.toLowerCase()==="true"},n}(),IndexPageTaskDrawer=function(){function n(){}return n.GetNotFoundElement=function(n){var t=document.createElement("tr"),i='\n        <td colspan="'+n+'">\n            <i class="far fa-frown"><\/i>\n            Не найдено\n        <\/td>';return t.innerHTML=i,t},n.GetTaskElementForPerformedTr=function(n){var r=n.IsPerformedInTime?"success":"danger",t=document.createElement("tr"),i;return t.classList.add(r),t.classList.add("performed-chemistry-task"),i='\n\n                        <td>\n                            <a href="/Chemistry/Tasks/Task/'+n.Id+'">\n                                '+n.Title+'\n                            <\/a>\n                        <\/td>\n\n                        <td>\n                            <a href="/Chemistry/Tasks?id='+n.PerformerUser.Id+'">\n                                '+n.PerformerUser.Name+" "+n.PerformerUser.Email+"\n                            <\/a>\n                        <\/td>\n\n                        <td>\n                            "+moment(n.DeadLineDate).locale("ru").format("DD MMMM YYYY, hh:mm:ss")+"\n                        <\/td>\n\n                        <td>\n                            "+moment(n.PerformedDate).locale("ru").format("DD MMMM YYYY, hh:mm:ss")+"\n                        <\/td>\n\n                        <td>\n                            "+(n.AdminQuantity!=null?n.AdminQuantity:"")+"\n                        <\/td>\n\n                        <td>\n                            "+(n.PerformerQuantity!=null?n.PerformerQuantity:"")+"\n                        <\/td>\n\n                        <td>\n                            "+(n.AdminQuality!=null?n.AdminQuality:"")+"\n                        <\/td>\n\n                        <td>\n                            "+(n.PerformerQuality!=null?n.PerformerQuality:"")+"\n                        <\/td>",t.innerHTML=i,t},n.GetTaskElementForNotPerformedTr=function(n){var r=new Date,u=n.DeadLineDate>r?"success":"danger",i=document.createElement("tr"),t;return i.classList.add(u),t='\n\n                        <td>\n                            <a href="/Chemistry/Tasks/Task/'+n.Id+'">\n                                '+n.Title+'\n                            <\/a>\n                        <\/td>\n\n                        <td>\n                            <a href="/Chemistry/Chemistry?id='+n.PerformerUser.Id+'">\n                                '+n.PerformerUser.Name+" "+n.PerformerUser.Email+"\n                            <\/a>\n                        <\/td>\n\n                        <td>\n                            "+moment(n.DeadLineDate).locale("ru").format("DD MMMM YYYY, hh:mm:ss")+"\n                        <\/td>\n\n                        <td>",t+=n.ChemistryMethodFile!=null?'\n                                <a href="/Files/GetDbFileById?id='+n.ChemistryMethodFile.FileId+'" class="btn btn-primary">\n                                    '+n.ChemistryMethodFile.Name+"\n                                <\/a>":"[Метод не указан]",t+="\n\n                        <\/td>\n\n                        <td>\n                            "+(n.AdminQuality!=null?n.AdminQuality:"")+"\n                        <\/td>\n\n                        <td>\n                            "+(n.AdminQuantity!=null?n.AdminQuantity:"")+"\n                        <\/td>",i.innerHTML=t,i},n}(),TasksFilter=function(){function n(){}return n.prototype.SetTasks=function(n){this.Tasks=n},n.prototype.ApplyFilter=function(){this.Tasks==null&&alert("Не установлены названия");var n=this.Tasks;n=this.SortTasks(n);this.ShowAndHideTasks(n)},n.prototype.ClearFilter=function(){document.getElementsByName("SearchTasks.Q")[0].value=""},n.prototype.SearchAndSortTasks=function(t){var r=document.getElementsByName("SearchTasks.Q")[0].value,f=r!==null&&r.length>0,u,i;return f?TaskFilterMethods.ApplyTextFilter(t,r):(u=document.getElementsByName("SearchTasks.TaskStatus")[0].value,t=TaskFilterMethods.ApplyStatusFilter(t,TaskFilterMethods.ParseBoolean(u)),i=document.getElementsByName("SearchTasks.User")[0].value,i!=null&&i!==n.ShowAllString&&(t=t.filter(function(n){return n.PerformerUser.Id==i})),t)},n.prototype.ShowAndHideTasks=function(n){n=this.SearchAndSortTasks(n);this.DrawPerformed(n);this.DrawNotPerformed(n)},n.prototype.DrawPerformed=function(n){var i=document.getElementById("performed-tbody"),r,t;for(i.innerHTML="",r=n.filter(function(n){return n.IsPerformed}),t=0;t<r.length;t++)i.appendChild(IndexPageTaskDrawer.GetTaskElementForPerformedTr(r[t]));n.length===0&&i.appendChild(IndexPageTaskDrawer.GetNotFoundElement(8))},n.prototype.DrawNotPerformed=function(n){var i=document.getElementById("not-performed-body"),r,t;for(i.innerHTML="",r=n.filter(function(n){return!n.IsPerformed}),t=0;t<r.length;t++)i.appendChild(IndexPageTaskDrawer.GetTaskElementForNotPerformedTr(r[t]));n.length==0&&i.appendChild(IndexPageTaskDrawer.GetNotFoundElement(6))},n.prototype.SortTasks=function(n){var t=document.getElementsByName("SearchTasks.Sort")[0].value;return t==="1"?this.SortByPerformedDate(n):t==="2"?this.SortByPerformerName(n):n},n.prototype.SortByPerformedDate=function(n){return n.sort(function(n,t){if(n.PerformedDate==null&&t.PerformedDate==null)return 0;if(n.PerformedDate!=null&&t.PerformedDate==null)return 1;if(n.PerformedDate==null&&t.PerformedDate!=null)return-1;var i=n.PerformedDate,r=t.PerformedDate;return i>r?1:i<r?-1:0})},n.prototype.SortByPerformerName=function(n){return n.sort(function(n,t){return n.PerformerUser.Name>t.PerformerUser.Name?1:n.PerformerUser.Name<t.PerformerUser.Name?-1:0})},n.FilterPrefix="Search",n.ShowAllString="ShowAll",n}();